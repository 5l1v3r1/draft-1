title: System View - Token Manager
backgroundColor: '#ffffff'
components:
  -
    kind: cli
    impl: SPA / iOS / Android
    label: Client App
  -
    kind: waf
    impl: AWS WAF
    provider: AWS
  -
    kind: cdn
    impl: AWS Cloudfront
    provider: AWS
  -
    kind: gtw
    impl: API Gateway
    provider: AWS
  -
    kind: lba
    impl: AWS NLB
    provider: AWS
  -
    kind: fun
    label: Verify JWT
    impl: AWS Lambda
    provider: AWS
  -
    kind: fun
    label: Verify OTP
    impl: AWS Lambda
    provider: AWS
  -
    kind: kub
    impl: AWS ECS
    provider: AWS
  -
    kind: ser
    label: Token Manager
    impl: AWS EC2
    provider: AWS
  -
    kind: mem
    label: Redis
    impl: Amazon ElastiCache
    provider: AWS
    fillColor: '#d82a0b'
    fontColor: '#ffffff'
  -
    kind: ost
    label: Bucket
    impl: AWS S3
    provider: AWS
    fillColor: '#571307'
    fontColor: '#ffffff'
  -
    kind: rdb
    label: MySQL
    impl: Amazon RDS
    provider: AWS
    fillColor: '#285192'
    fontColor: '#ffffff'
connections:
  -
    origin: cli1
    targets:
      -
        id: waf1
  -
    origin: waf1
    targets:
      -
        id: cdn1
  -
    origin: cdn1
    targets:
      -
        id: gtw1
  -
    origin: gtw1
    targets:
      -
        id: lba1
      -
        id: fun1
      -
        id: fun2
  -
    origin: lba1
    targets:
      -
        id: kub1
  -
    origin: kub1
    targets:
      -
        id: ser1
  -
    origin: ser1
    targets:
      -
        id: mem1
      -
        id: ost1
      -
        id: rdb1
ranks:
  -
    name: rank1
    components:
      - gtw1
      - lba1
      - kub1